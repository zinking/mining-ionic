<ion-view view-title="{{viewModel.opmlFeed.Title}}" hide-nav-bar="true">
    <ion-footer-bar class="bar-calm">
        <button class='button icon ion-arrow-left-a' ng-click='goBackToTab()'></button>
        <ion-spinner ng-show="viewModel.isBusy" icon="android"></ion-spinner>
        <h1 class="title">({{viewModel.opmlFeed.unReadCount}})</h1>
        <button ng-if="viewModel.opmlFeed.filterHasRead" class="button icon ion-ios-book"
                ng-click="toggleReadFilter()" style="color:silver"></button>
        <button ng-if="!viewModel.opmlFeed.filterHasRead" class="button icon ion-ios-book" ng-click="toggleReadFilter()"></button>
        <button class="button icon ion-navicon" ng-click="openPopover($event)"></button>
    </ion-footer-bar>

    <ion-content class="gem-ion-content" >
        <div class="bar bar-header">
            <h2 class="title">
                <b>{{viewModel.opmlFeed.Title}}</b>
                <a class='button icon ion-link button-right' ng-href="{{viewModel.opmlFeed.HtmlUrl}}" target="_blank"></a>
            </h2>
        </div>

        <ion-list >
            <story story="story" open="openStory($index)"
                   collection-repeat="story in viewModel.stories | filterRead:viewModel.opmlFeed.filterHasRead"></story>
        </ion-list>
        <div class="item" ng-show="!viewModel.hasMoreStories">End Of Feed</div>
        <ion-infinite-scroll ng-if="viewModel.hasMoreStories"
                             on-infinite="loadMoreStories()" immediate-check="false" distance="1%">
        </ion-infinite-scroll>
    </ion-content>
</ion-view>